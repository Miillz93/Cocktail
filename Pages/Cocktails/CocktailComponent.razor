@page "/cocktail/{Id}"
@inject HttpClient Http

<PageTitle>Cocktail Details</PageTitle>
@{ 
    string? imagePath = drink.strDrinkThumb.Replace("\\","").Trim();
    string? imgdetail = (string) drink.strDrinkAlternate;
}
 
<MudGrid Class="mt-6">

    <MudItem xs="12" sm="12" Class="mx-4">
        <MudText
        Typo="Typo.h5" Color="Color.Success">
        Cocktail Details
        </MudText>
    </MudItem>
    <MudDivider />
    <MudItem xs="12" sm="12">
        <MudCard Class="d-flex">
            <MudItem>
                <MudImage Src="@imagePath"
                Width="250" 
                Height="250" 
                Alt="@imgdetail" 
                Elevation="1" 
                Class="rounded-lg ma-4"/>
            </MudItem>
            <MudItem>
                <MudText>How To ? @drink.strDrink</MudText>
                <MudItem >
                    <MudText>Ingredients: </MudText>
                </MudItem>
                <MudText Class="mb-4">Description: @drink.strInstructions</MudText>
                <MudButton Variant="Variant.Filled"><MudLink Href="/" Underline="Underline.None">Retour</MudLink>
                </MudButton>
            </MudItem>
        </MudCard>  
            
    </MudItem>
    

</MudGrid>

@code {

    [Parameter]
    public string Id{get;set;}

    public Drink drink;

    protected override async Task OnInitializedAsync()
    {
        
        Stream stream = await Http.GetStreamAsync(DrinkRoot._urlBase+$"lookup.php?i={Id}");
        string reader = new StreamReader(stream).ReadToEnd();
        var cocktailsValues = System.Text.Json.JsonSerializer.Deserialize<DrinkRoot>(reader);
        drink = cocktailsValues.drinks.First();
    
    }
    



}
